(function(context){var Patches={String:{reverse:function(){return this.split("").reverse().join("")}},Array:{indexOf:function(obj,start){for(var i=start||0;i<this.length;i++)
if(this[i]===obj)
return i;return-1}}};for(var key in Patches)(function(){var patch=Patches[key];var target=context[key];if(patch&&target){for(var method in patch){if(!(method in target)){target.prototype[method]=patch[method]}}}})()})(this);var safetyCheck=!1;function showFancyLeadboxes(){safetyCheck=!0;console.log('We can safely display timed/exit leadboxes.')}(function(){var debugblock=window.location&&String(window.location.hash)==='#debugblock';if(debugblock){safetyCheck=!1;return}
var safetyUrl='//my.leadpages.net/static/all/js/can-i-show.js';var getSegment=function(url){var segments=url.split('/');if(!~segments[0].indexOf('http')){safetyUrl='//'+segments[0]+'/static/all/js/can-i-show.js'}else{safetyUrl='//'+segments[2]+'/static/all/js/can-i-show.js'}
return safetyUrl};if(document.currentScript){safetyUrl=getSegment(document.currentScript.src)}else{var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){var url=scripts[i].getAttribute('data-url');var match=url&&url.match(/(.+\/)leadbox\/([0-9a-fA-F]+%3A[0-9a-fA-F]+)\/([0-9]+)\/$/);if(match){safetyUrl=getSegment(url);break}}}
var script=document.createElement('script');script.src=safetyUrl;document.getElementsByTagName('head')[0].appendChild(script)})();(function(){if(window.LEADBOX)return;else window.LEADBOX={};LEADBOX.debugging=window.location&&String(window.location.hash)==='#debugging';function getSize(callback){var body=window.document.body,doc=window.document.documentElement,documentWidth=Math.max(body.scrollWidth,doc.scrollWidth,body.offsetWidth,doc.offsetWidth,doc.clientWidth),documentHeight=Math.max(body.scrollHeight,doc.scrollHeight,body.offsetHeight,doc.offsetHeight,doc.clientHeight),viewportWidth=window.innerWidth||doc.clientWidth||body.clientWidth,viewportHeight=window.innerHeight||doc.clientWidth||body.clientWidth;var workaround=window.setTimeout(function(){workaround=null;callback(documentWidth,documentHeight,viewportWidth,viewportHeight)},100);if(typeof FB!="undefined"&&FB.Canvas){FB.Canvas.getPageInfo(function(info){if(workaround==null)
return;window.clearTimeout(workaround);workaround=null;if(info.clientWidth-info.offsetLeft<viewportWidth)
viewportWidth=info.clientWidth-info.offsetLeft;if(info.clientHeight-info.offsetTop<viewportHeight)
viewportHeight=info.clientHeight-info.offsetTop;callback(documentWidth,documentHeight,viewportWidth,viewportHeight)})}}
function getScroll(callback){var doc=document.documentElement,body=document.body,left=doc&&doc.scrollLeft||body&&body.scrollLeft||0,top=doc&&doc.scrollTop||body&&body.scrollTop||0;var workaround=window.setTimeout(function(){workaround=null;callback(left,top,0,0)},100);if(typeof FB!="undefined"&&FB.Canvas){FB.Canvas.getPageInfo(function(info){if(workaround==null)
return;window.clearTimeout(workaround);workaround=null;callback(left,top,info.scrollLeft,info.scrollTop)})}}
function setScroll(left,top,fb_left,fb_top){window.scrollTo(left,top);if(typeof FB!="undefined"&&FB.Canvas){FB.Canvas.scrollTo(fb_left,fb_top)}}
function forEach(array,block,scope){var set=array.slice(0);for(var i=0,n=array.length;i<n;i++){if(!1===block.call(scope,set[i],i))return!1}
return!0}
function addEvent(object,type,handler){var method;if(object&&type&&handler){method=object.addEventListener?'addEventListener':object.attachEvent?'attachEvent':'';type=method=='addEventListener'?type:'on'+type;if(method){object[method](type,function(event){event=event?event:window.event;handler.apply(object,[event])});return!0}}
return!1}
function addInterval(block,delay){var interval={id:null,loop:null,delay:delay,block:block};interval.loop=function(){interval.block();interval.id=setTimeout(interval.loop,interval.delay);return interval};return interval.loop()}
function getIntersection(aStart,aEnd,bStart,bEnd){var i={};var aDelta={x:aEnd.x-aStart.x,y:aEnd.y-aStart.y};var bDelta={x:bEnd.x-bStart.x,y:bEnd.y-bStart.y};var s=(-aDelta.y*(aStart.x-bStart.x)+aDelta.x*(aStart.y-bStart.y))/(-bDelta.x*aDelta.y+aDelta.x*bDelta.y);var t=(bDelta.x*(aStart.y-bStart.y)-bDelta.y*(aStart.x-bStart.x))/(-bDelta.x*aDelta.y+aDelta.x*bDelta.y);if(s>=0&&s<=1&&t>=0&&t<=1){i.x=aStart.x+(t*aDelta.x);i.y=aStart.y+(t*aDelta.y);return i}
return null}
var activating=null;var exitor=null;var MouseTracker=(function(debugging){var left=navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)?1:0;var buttonWidth=350;var buttonHeight=50;var chromeHeight=0;var seconds=1/4;var sureness=1;var userVariance=150;var size=this.size={x:null,y:null};var history=this.history={x:null,y:null};var position=this.position={x:null,y:null};var prediction=this.prediction={x:null,y:null};var velocity=this.velocity={x:0,y:0};var axis={'x':'y','y':'x'};var count=0;var delay=100;var sure=0;var ready=!1;var past=[];var back=3;var canvas=document&&document.documentElement?document.documentElement:document.body;if(debugging){document.documentElement.style.cursor='none';document.body.style.cursor='none'}
function updateSize(event){getSize(function(dw,dh,width,height){size.x=width;size.y=height})}
function clearPosition(event){position.x=null;position.y=null}
function updatePosition(event){if(event){position.x=event.clientX;position.y=event.clientY}
if(debugging){var markers=document.getElementsByTagName('i');var marker=markers&&markers[0]?markers[0]:document.createElement('i');document.body.appendChild(marker);marker.style.display='block';marker.style.position='fixed';marker.style.background='#000';marker.style.width='6px';marker.style.height='6px';marker.style.marginLeft='-3px';marker.style.marginTop='-3px';marker.style.left=''+position.x+'px';marker.style.top=''+position.y+'px';marker.style.cursor='none';marker.style.zIndex=101}}
function updateVector(){var anticipation=seconds*(1000/delay);var projection={x:position.x,y:position.y};for(var a in axis){if(position[a]!==null){velocity[a]=history[a]!==null?position[a]-history[a]:0;prediction[a]=position[a]+(velocity[a]*anticipation);history[a]=position[a]}else{history[a]=position[a]=prediction[a]=null}}
past=[{x:velocity.x,y:velocity.y}].concat(past.slice(0,back));var i=0;var average={x:0,y:0};forEach(past,function(value,key){if(key<back){average.x=average.x+value.x;average.y=average.y+value.y;i++}});average.x=Math.round(average.x/i)*anticipation;average.y=Math.round(average.y/i)*anticipation;var next={x:position.x+average.x,y:position.y+average.y};if(debugging){var markers=document.getElementsByTagName('var');var marker=markers&&markers[0]?markers[0]:document.createElement('var');document.body.appendChild(marker);if(!next.x&&!next.y)document.body.removeChild(marker);marker.style.display='block';marker.style.position='fixed';marker.style.background='#AAA';marker.style.width='6px';marker.style.height='6px';marker.style.marginLeft='-3px';marker.style.marginTop='-3px';marker.style.left=''+next.x+'px';marker.style.top=''+next.y+'px';marker.style.zIndex=100}
getSize(function(dw,dh,vw,vh){var closeStart={x:left?0-userVariance:vw-buttonWidth-userVariance,y:-1};var closeEnd={x:left?0+buttonWidth+userVariance:vw+userVariance,y:-1};var intersect=getIntersection(position,next,closeStart,closeEnd);if(intersect){sure++;if(sure>sureness&&!velocity.x&&!velocity.y){if(exitor&&safetyCheck){window.LEADBOX.show(exitor);exitor=null}}}else{sure=0}})};canvas.style.minHeight='100%';addEvent(canvas,'mousemove',updatePosition);updatePosition();addEvent(window,'resize',updateSize);updateSize();addInterval(updateVector,100)});var LeadBoxes=function(){var leadboxes={};var background=document.createElement("div");background.style.position="absolute";background.style.top=background.style.bottom=background.style.left=background.style.right="0";background.style.zIndex="2147483646";background.style.background="black";background.style.width="100%";background.style.opacity="0.5";background.style.display="none";document.body.appendChild(background);function init(id,url,stats,idOverride){var config={};if(leadboxes[id])return;if(url[url.length-1]!=="&"){url+="&"}
url+="__fromjs=1";if(typeof window.postMessage=="undefined"||/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){leadboxes[id]=[url,stats,config]}else{leadboxes[id]=[document.createElement("iframe"),stats,config];var parser=document.createElement("a");parser.href=url;if(/test/i.test(parser.hostname.split(".")[1])){parser.hostname=[parser.hostname.split(".")[0],"lpusercontenttest.com"].join(".");url=parser.href}
leadboxes[id][0].src=url.replace("lp-in-iframe=0","lp-in-iframe=1");leadboxes[id][0].style.position="absolute";leadboxes[id][0].style.left="0";leadboxes[id][0].style.top="0";leadboxes[id][0].style.width="100%";leadboxes[id][0].style.display="none";leadboxes[id][0].style.border="none";leadboxes[id][0].style.zIndex="2147483647";leadboxes[id][0].onload=function(){if(window.LEADBOX.debugging){if(window.console&&console.log)console.log('resetting leadbox',id);leadboxes[id][0].contentWindow.postMessage({handler:'reset',data:{id:idOverride||id}},'*')}
var msg=JSON.stringify({handler:'visit',visit:{id:idOverride||id}})
leadboxes[id][0].contentWindow.postMessage(msg,'*');leadboxes[id][0].onload=null};document.body.appendChild(leadboxes[id][0]);getSize(function(documentWidth,documentHeight,width,height){leadboxes[id][0].style.height=height+"px"})}}
var active=null,overflow=null;function hide(){if(!active)return;leadboxes[active][0].style.display="none";background.style.display="none";active=null;document.body.style.overflow=overflow;overflow=null}
background.onclick=hide;function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=((new Date()).getTime()+Math.random()*16)%16|0;return(c=="x"?r:(r&0x7|0x8)).toString(16)})}
function show(id,idOverride,cb){if(typeof idOverride==='function'){cb=idOverride;idOverride=null}
var url=leadboxes[id][1]+"?",data={"id":idOverride||id,"uuid":uuid(),"type":"view","served_by":"leadboxes"};try{leadboxes[id][0].contentWindow.postMessage({handler:'display',display:{id:idOverride||id}},'*')}catch(e){}
for(var key in data){if(data[key]!==undefined){url+=encodeURIComponent(key)+"="+encodeURIComponent(data[key])+"&"}}
var image=document.createElement("img");if(typeof leadboxes[id][0]=="string"){var lbURL=leadboxes[id][0].replace("__fromjs=1","__fromjs=0");window.open(lbURL,"_blank")}else{getScroll(function(left,top,fbLeft,fbTop){hide();overflow=document.body.style.overflow;setScroll(left,top,fbLeft,fbTop);document.body.style.overflow="hidden";leadboxes[id][0].style.top=(top+fbTop)+"px";leadboxes[id][0].style.left=(left+fbLeft)+"px";leadboxes[id][0].style.display="block";background.style.display="block";active=id;if(cb)cb();image.src=url})}}
this.resize=function(){getSize(function(documentWidth,documentHeight,width,height){background.style.height=documentHeight+"px";for(var id in leadboxes){if(typeof(leadboxes[id][0])=="string")
continue;leadboxes[id][0].style.height=height+"px"}})};var onMessageHandler=function(event){if(event&&event.data&&event.data.handler)switch(event.data.handler){case 'visited':var id=event.data.visit.id;var config=leadboxes[id][2]||{};var visit=event.data.visit;var show=!0;var day=1000*60*60*24;var last=Number(new Date(visit['display-date']||0));var now=Number(new Date());var visits=visit['visit-count']||0;last=last?last/day:0;now=now/day;day=now-last;if(config.time){var time=config.time;var timeout=(time.seconds*1000)||0;show=!0;if(time.views)show=show&&!(visits%(time.views+1));if(time.days)show=show&&time.days<day;if(show)setTimeout(function(){if(safetyCheck){window.LEADBOX.show(id)}},timeout)}
if(config.exit){var exit=config.exit;show=!0;if(exit.days)show=show&&exit.days<day;if(show)exitor=id}
break;case 'displayed':break}
if(event.data=="close")hide()};var scripts=document.getElementsByTagName("script");var triggers=document.getElementsByTagName("a"),callback=function(event){var id=this.getAttribute("data-leadbox");var idOverride=this.getAttribute("data-leadbox-id");if(id){if(event&&event.preventDefault)event.preventDefault();show(id,idOverride)}};for(var i=0;i<triggers.length;i++){try{(function(){var id;var trigger=triggers[i];var url=trigger.getAttribute("href");var match=url.split("?")[0].match(/(.+\/)leadbox\/([0-9a-fA-F]+%3A[0-9a-fA-F]+)\/([0-9]+)\/$/);if(match){id=match[2]=decodeURIComponent(match[2]);init(url,url+((url.indexOf("?")==-1)?"?":"&")+"lp-in-iframe=0&"+window.location.search.replace(/^\?/,""),match[1]+"forms/pixel/"+match[3]+"/",id);trigger.setAttribute("data-leadbox",url);trigger.setAttribute("data-leadbox-id",id);trigger.onclick=callback}})()}catch(e){}}
for(var i=0;i<scripts.length;i++){(function(script){var id=script.getAttribute('data-leadbox');var url=script.getAttribute('data-url');var match=url&&url.match(/(.+\/)leadbox\/([0-9a-fA-F]+%3A[0-9a-fA-F]+)\/([0-9]+)\/$/);var config=script.getAttribute('data-config');config=config&&JSON&&JSON.parse(unescape(config));if(match){var formUrl=url+((url.indexOf("?")==-1)?"?":"&")+"lp-in-iframe=0&"+window.location.search.replace(/^\?/,"");var statUrl=match[1]+"forms/pixel/"+match[3]+"/";init(id,formUrl,statUrl);if(config&&config.type){var settings=leadboxes[id][2]=leadboxes[id]?leadboxes[id][2]:{};settings[config.type]=config.settings}}})(scripts[i])}
window.formFrameClosed=hide;addEvent(window,'message',onMessageHandler);setTimeout(function(){new MouseTracker()});window.LEADBOX.reset=function(id){var key;for(key in leadboxes){};if(leadboxes&&leadboxes[key]){leadboxes[key][0].contentWindow.postMessage({'handler':'reset','data':{id:id}},'*')}};window.LEADBOX.show=function(id){if(id&&activating!==id&&active!==id){activating=id;leadboxes[id][0].contentWindow.postMessage({handler:'display',display:{id:id}},'*');show(id,function(){activating=null})}};window.LEADBOX.hide=function(){hide()};if(window.LEADBOX&&window.LEADBOX.debugging){if(window.console&&console.log)console.log('debugging detected, resetting active leadboxes')}};var load=function(){if(!window.ae417310535411e38f960800200c9a66)
window.ae417310535411e38f960800200c9a66=new LeadBoxes();window.ae417310535411e38f960800200c9a66.resize()};if(window.addEventListener){window.addEventListener("load",load);window.addEventListener("resize",load);document.addEventListener("DOMContentLoaded",load)}else if(window.attachEvent){window.attachEvent("onload",load);window.attachEvent("onresize",load);document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete")
load()})}else{var oldLoad=window.onload,oldResize=window.onresize;window.onload=function(){load();if(typeof oldLoad=="function")
oldLoad()};window.onresize=function(e){load();if(typeof oldResize=="function")
oldResize(e)}}})()