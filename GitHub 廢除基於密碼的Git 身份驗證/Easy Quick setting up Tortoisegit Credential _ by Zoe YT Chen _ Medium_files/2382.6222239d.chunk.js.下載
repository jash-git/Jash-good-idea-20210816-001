(self.webpackChunklite=self.webpackChunklite||[]).push([[2382],{43915:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});var i=t(67294);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var o=i.createElement("path",{d:"M19.07 21.12a6.33 6.33 0 0 1-3.53-1.1 7.8 7.8 0 0 1-.7-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.66 0 8.46 3.5 8.46 7.8 0 2.06-.85 3.99-2.4 5.45a6.28 6.28 0 0 0 1.14 2.59c.15.21.17.48.06.7a.69.69 0 0 1-.62.38h-.03zm0-1v.5l.03-.5h-.03zm-3.92-1.64l.21.2a6.09 6.09 0 0 0 3.24 1.54 7.14 7.14 0 0 1-.83-1.84 5.15 5.15 0 0 1-.16-.75 2.4 2.4 0 0 1-.02-.29v-.23l.18-.15a6.6 6.6 0 0 0 2.3-4.96c0-3.82-3.4-6.93-7.6-6.93-4.19 0-7.6 3.11-7.6 6.93 0 3.83 3.41 6.94 7.6 6.94.83 0 1.64-.12 2.41-.35l.28-.08z",fillRule:"evenodd"});const r=function(e){return i.createElement("svg",a({width:25,height:25},e),o)}},55459:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});var i=t(67294);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var o=i.createElement("path",{d:"M21.27 20.06a9.04 9.04 0 0 0 2.75-6.68C24.02 8.21 19.67 4 14.1 4S4 8.21 4 13.38c0 5.18 4.53 9.39 10.1 9.39 1 0 2-.14 2.95-.41.28.25.6.49.92.7a7.46 7.46 0 0 0 4.19 1.3c.27 0 .5-.13.6-.35a.63.63 0 0 0-.05-.65 8.08 8.08 0 0 1-1.29-2.58 5.42 5.42 0 0 1-.15-.75zm-3.85 1.32l-.08-.28-.4.12a9.72 9.72 0 0 1-2.84.43c-4.96 0-9-3.71-9-8.27 0-4.55 4.04-8.26 9-8.26 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32a5.59 5.59 0 0 0 .21 1.29c.19.7.49 1.4.89 2.08a6.43 6.43 0 0 1-2.67-1.06c-.34-.22-.88-.48-1.16-.74z"});const r=function(e){return i.createElement("svg",a({width:29,height:29},e),o)}},39186:(e,n,t)=>{"use strict";t.d(n,{r:()=>s});var i=t(319),a=t.n(i),o=t(28233),r=t(76992),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TruncatedPostCardEditorWriterButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CopyFriendLinkMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}}].concat(a()(o.x.definitions),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"CopyFriendLinkMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]),a()(r.JP.definitions))},d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TruncatedPostCardReaderButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}}].concat(a()(r.JP.definitions))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TruncatedPostCardOverflowButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"TruncatedPostCardEditorWriterButton_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"TruncatedPostCardReaderButton_post"}}]}}].concat(a()(l.definitions),a()(d.definitions))}},14345:(e,n,t)=>{"use strict";t.d(n,{A:()=>K});var i=t(67294),a=t(67154),o=t.n(a),r=t(63038),l=t.n(r),d=t(12291),s=t(93653),u=t(35848),c=t(53962),m=t(63564),p=t(71245),v=t(965),k=t(78820),f=t(73232),b=t(76532),S=t(1932),C=t(32262),h=t(57469),E=t(7157),y=t(29169),g=t(92528),N=t(80362),w=t(82318),P=t(12861),F=t(98024),T=t(6688),I=t(14391),O=t(65347),D=t(67297),x=t(93394),V=t(39171),R=t(51064),_=t(55573),j=t(27952),A=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}},L=function(e){var n=e.post,t=e.publisherContext,a=e.isEditor,r=e.isWriter,L=e.creator,M=(0,T.I)(),U=(0,D.v9)((function(e){return e.config.authDomain})),H=n.id,B=n.collection,K=n.responseDistribution,q=n.visibility,z=n.mediumUrl,Q=n.allowResponses,W=(0,b.H)().value,J=null==W?void 0:W.id,Z=null==L?void 0:L.id,G=(0,S.T)(n).viewerEdge,$=B||{id:"",name:""},Y=$.id,X=$.name,ee=(0,R.O)(!1),ne=l()(ee,3),te=ne[0],ie=ne[1],ae=ne[2],oe=(0,k.n_)(n,t),re=l()(oe,2),le=re[0],de=re[1],se=i.useState(""),ue=l()(se,2),ce=ue[0],me=ue[1],pe=i.useCallback((function(){ae(),de().then((function(e){var n=e.errors;n&&n.length&&n[0].message?me(n[0].message):window.location.reload()}))}),[ae,de,me]),ve=(0,p.yb)(n),ke=(0,R.O)(!1),fe=l()(ke,3),be=fe[0],Se=fe[1],Ce=fe[2],he=i.useCallback((function(){ve(B).then((function(){return window.location.reload()}))}),[Y,ve]),Ee=(0,s.j)(H),ye=l()(Ee,1)[0],ge=(0,R.O)(!1),Ne=l()(ge,3),we=Ne[0],Pe=Ne[1],Fe=Ne[2],Te=i.useCallback((function(){ye().then((function(){return window.location.reload()}))}),[ye]),Ie=K===I.Et.DISTRIBUTED,Oe=(0,R.O)(!1),De=l()(Oe,3),xe=De[0],Ve=De[1],Re=De[2],_e={buttonStyle:"ERROR",cancelText:"Cancel"},je="truncatedPostCardEditorWriterMenu",Ae="Delete story".concat(Ie?" and response":""),Le=Ie?f.Q:"Are you sure you want to delete this story?",Me="LOCKED"===q,Ue="User"===t&&r||"Collection"===t&&a,He=(0,d.I0)(),Be=i.useCallback((function(e){return He((0,O.at)(e))}),[He]),Ke=(0,D.b$)((function(e){return e.multiVote.clapsPerPost})),qe=(0,_.l)(Ke,n,G),ze=qe.clapCount,Qe=qe.viewerClapCount,We=(0,v.CP)();return i.createElement(i.Fragment,null,i.createElement(g.Q,o()({},_e,{isVisible:be,onConfirm:he,hide:Ce,titleText:"Remove story",confirmText:"Remove",isDestructiveAction:!0}),"Are you sure you want to remove this story from ",X,"?"),i.createElement(g.Q,o()({},_e,{isVisible:we,onConfirm:Te,hide:Fe,titleText:Ae,confirmText:"Delete",isDestructiveAction:!0}),Le),i.createElement(g.Q,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:xe,onConfirm:function(){var e=(0,j.d0A)(U,H);window.location.replace(e)},hide:Re,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},f.t),i.createElement(N.J,{ariaId:je,hide:ae,isVisible:te,popoverRenderFn:function(){return i.createElement(C.mX,null,i.createElement(C.Sl,null,Ie?i.createElement(w.r,{linkStyle:"SUBTLE",onClick:(0,V.B)(ae,Ve)},"Edit story"):i.createElement(w.r,{linkStyle:"SUBTLE",href:(0,j.d0A)(U,H)},"Edit story")),(a||r&&"User"===t)&&i.createElement(C.Sl,null,i.createElement(w.r,{onClick:pe},le?"Unpin":"Pin"," story")),i.createElement(C.oK,null),i.createElement(C.Sl,null,i.createElement(w.r,{href:(0,j.KIb)(U,H)},"Story settings")),i.createElement(C.Sl,null,i.createElement(w.r,{href:(0,j.T0G)(U,H)},"Story stats")),Me&&z&&(null==G?void 0:G.shareKey)&&i.createElement(c.$,{post:n,shareKey:null==G?void 0:G.shareKey}),i.createElement(C.oK,null),Ue?i.createElement(m.r,{hidePopover:ae,postId:n.id,allowResponses:Q}):null,Y&&i.createElement(C.Sl,null,i.createElement(w.r,{onClick:Se},"Remove story from publication")),r&&i.createElement(C.Sl,null,i.createElement(w.r,{onClick:(0,V.B)(ae,Pe)},"Delete story")),a&&!r&&i.createElement(i.Fragment,null,i.createElement(C.oK,null),J&&ze&&Qe&&Qe>0?i.createElement(C.Sl,null,i.createElement(w.r,{onClick:function(){return We(n,(null==W?void 0:W.id)||"",-Qe,G),Be({postId:n.id,clapCount:ze-Qe,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),void ae()}},"Undo applause for this post")):null,i.createElement(y.z,{targetUserId:Z,postId:n.id,hidePopover:ae,viewerId:J}),i.createElement(u.q,{hidePopover:ae,creator:L}),i.createElement(h.F,{hidePopover:ae,creator:L,viewer:W}),i.createElement(E.j,{hidePopover:ae,creator:L,viewer:W})))}},i.createElement(w.r,{ariaControls:je,ariaExpanded:te?"true":"false",ariaLabel:"More options",onClick:ie},i.createElement(x.Z,{className:M(A)}))),i.createElement(P.F,{isVisible:!!ce,hide:function(){return me("")},duration:5e3},i.createElement(F.F,{scale:"M"},ce)))},M=t(36511),U=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}},H=function(e){var n=e.post,t=e.viewer,a=(0,T.I)(),o=n.creator,r=null==o?void 0:o.id,s=(0,R.O)(!1),c=l()(s,3),m=c[0],p=c[1],k=c[2],f="truncatedPostCardReaderMenu",b=(0,M.r)().viewerId,g=(0,S.T)(n).viewerEdge,P=(0,d.I0)(),F=i.useCallback((function(e){return P((0,O.at)(e))}),[P]),I=(0,D.b$)((function(e){return e.multiVote.clapsPerPost})),V=(0,_.l)(I,n,g),j=V.clapCount,A=V.viewerClapCount,L=(0,v.CP)();if(!r)return null;var H=b&&j&&A&&A>0;return i.createElement(N.J,{ariaId:f,hide:k,isVisible:m,popoverRenderFn:function(){return i.createElement(C.mX,null,!!H&&i.createElement(C.Sl,null,i.createElement(w.r,{onClick:function(){return L(n,(null==t?void 0:t.id)||"",-A,g),F({postId:n.id,clapCount:j-A,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),void k()}},"Undo applause for this post")),i.createElement(y.z,{targetUserId:r,postId:n.id,hidePopover:k,viewerId:b}),i.createElement(u.q,{hidePopover:k,creator:o}),i.createElement(h.F,{hidePopover:k,creator:o,viewer:t}),i.createElement(E.j,{hidePopover:k,creator:o,viewer:t}))}},i.createElement(w.r,{ariaControls:f,ariaExpanded:m?"true":"false",ariaLabel:"More options",onClick:p},i.createElement(x.Z,{className:a(U)})))},B=t(73891),K=function(e){var n=e.post,t=e.publisherContext,a=(0,b.H)().value,o=(0,B.gY)(n.collection).viewerEdge,r=!(null==o||!o.isEditor),l=n.creator,d=(null==a?void 0:a.id)===(null==l?void 0:l.id);return a?r||d?i.createElement(L,{post:n,isEditor:r,isWriter:d,publisherContext:t,creator:l}):i.createElement(H,{post:n,viewer:a}):null}},40917:(e,n,t)=>{"use strict";t.d(n,{e:()=>m});var i=t(59713),a=t.n(i),o=t(4743),r=t(14391),l=t(43198);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var u=function(e,n){var t;return n?s(s({},e),{},{markups:[{anchorType:r.yG.LINK,type:r.Jh.A,start:0,end:(null==e||null===(t=e.text)||void 0===t?void 0:t.length)||0,href:n,userId:null,linkMetadata:null}]}):e},c=function(e,n){return n?s(s({},e),{},{href:n}):e},m=function(e,n){var t,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=null!==(t=(0,o.LI)(e).titleIndex)&&void 0!==t?t:(0,l.s)(e,l.j);return e.map((function(e,t){return i&&e.type===r.NJ.IMG?c(e,n):t===a?u(e,n):e}))}},30570:(e,n,t)=>{"use strict";t.d(n,{sK:()=>v,L0:()=>k,q9:()=>f});var i=t(28655),a=t.n(i),o=t(63038),r=t.n(o),l=t(71439),d=t(67294),s=t(73788),u=t(53976),c=t(85526);function m(){var e=a()(["\n  fragment InlineExpansionContext_post on Post {\n    id\n    creator {\n      id\n      customStyleSheet {\n        id\n        blogroll {\n          visibility\n        }\n      }\n      isAuroraVisible\n      followedCollections\n      socialStats {\n        followingCount\n        collectionFollowingCount\n      }\n      ...UserSubscribeButton_user\n    }\n    collection {\n      id\n      canToggleEmail\n      description\n      isAuroraEligible\n      isAuroraVisible\n      viewerEdge {\n        id\n        isEditor\n      }\n      tagline\n    }\n    customStyleSheet {\n      id\n      blogroll {\n        visibility\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var p=d.createContext({expandedPostId:null,setExpandedPostId:function(){},postInView:!1,setPostInView:function(){},expandedPost:null,setExpandedPost:function(){}}),v=function(){return d.useContext(p)},k=function(e){var n=e.children,t=d.useState(null),i=r()(t,2),a=i[0],o=i[1],l=d.useState(!1),c=r()(l,2),m=c[0],v=c[1],k=d.useState(null),f=r()(k,2),b=f[0],S=f[1],C=(0,u.VB)({name:"enable_inline_expansion",placeholder:null});return d.createElement(p.Provider,{value:{expandedPostId:a,setExpandedPostId:o,postInView:m,setPostInView:v,expandedPost:b,setExpandedPost:S}},d.createElement(s.k,{post:b,preload:!!C},n))},f=(0,l.Ps)(m(),c.w)},76992:(e,n,t)=>{"use strict";t.d(n,{JP:()=>r});var i=t(319),a=t.n(i),o=t(36896),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ClapMutation_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MultiVoteCount_post"}}]}}].concat(a()(o.U.definitions))};[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ClapMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numClaps"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clap"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"numClaps"},value:{kind:"Variable",name:{kind:"Name",value:"numClaps"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_viewerEdge"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}}]}}].concat(a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"ClapMutation_viewerEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PostViewerEdge"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}}]}}]),a()(r.definitions))},21356:(e,n,t)=>{"use strict";t.d(n,{x:()=>D,S:()=>x});var i=t(28655),a=t.n(i),o=t(71439),r=t(67294),l=t(12291),d=t(42631),s=t(89970),u=t(17920),c=t(60002),m=t(41236),p=t(86654),v=t(88817),k=t(70162),f=t(3369),b=t(965),S=t(58006),C=t(76532),h=t(1932),E=t(324),y=t(62181),g=t(95760),N=t(51512),w=t(65347),P=t(67297),F=t(55573),T=t(27952);function I(){var e=a()(["\n  fragment MultiVote_post on Post {\n    id\n    clapCount\n    creator {\n      id\n      ...SusiClickable_user\n    }\n    isPublished\n    ...SusiClickable_post\n    collection {\n      id\n      slug\n    }\n    isLimitedState\n    ...MultiVoteCount_post\n  }\n  ","\n  ","\n  ","\n"]);return I=function(){return e},e}var O=function(e){var n,t=e.post,i=e.buttonStyle,a=e.hasDialog,o=e.shouldShowResponsiveLabelText,I=void 0!==o&&o,O=e.shouldHideClapsText,D=void 0!==O&&O,x=e.shouldHideClapsCount,V=void 0!==x&&x,R=e.susiEntry,_=e.verticalClapsText,j=void 0!==_&&_,A=(0,b.CP)(),L=(0,C.H)().value,M=null!==(n=null==L?void 0:L.id)&&void 0!==n?n:"",U=(0,h.T)(t).viewerEdge,H=(0,P.v9)((function(e){return e.config.authDomain})),B=(0,P.b$)((function(e){return e.multiVote.clapsPerPost})),K=(0,l.I0)(),q=function(e){return K((0,w.at)(e))},z=(0,g.Av)(),Q=(0,N.pK)(),W=(0,F.l)(B,t,U),J=W.clapCount,Z=W.viewerClapCount,G=W.viewerHasClappedSinceFetch,$=r.useCallback((function(){if(Z&&Z>=k.S2)return"Viewer exceeded authorized claps limit.";q({postId:t.id,clapCount:J+1,viewerClapCount:Z+1,viewerHasClappedSinceFetch:!0})}),[Z,t.id,J]),Y=r.useCallback((function(){if(!Z)return"Viewer did not clap.";A(t,M,-Z,U),q({postId:t.id,clapCount:J-Z,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),z.event("post.clientUnvote",{postId:t.id,postIds:[t.id],unvoteCount:Z,source:Q})}),[Z,t.id,J,M,U,Q]),X=r.useCallback((function(e){A(t,M,e,U),z.event("post.clientUpvote",{postId:t.id,postIds:[t.id],voteCount:e,source:Q})}),[t.id,M,U,Q]),ee=(0,f.m)({onIncrementClaps:$,onUndoClaps:Y,onSubmitClapsAccumulated:X}),ne=ee.clappedAt,te=ee.onFloatEnd,ie=ee.removeBurst,ae=ee.clap,oe=ee.undoClaps,re=ee.isPopping,le=ee.isShowingViewerClapCount,de=ee.burstOffsets,se=ee.onPopEnd;r.useEffect((function(){return function(){var e;e={postId:t.id},K((0,w.HQ)(e))}}),[]);var ue,ce=t.collection,me=t.creator,pe=t.id,ve=t.isPublished,ke=t.isLimitedState,fe=(ue=!(!me||me.id!==M),ke?"This feature is temporarily disabled":ve?ue?"You cannot applaud your own story":void 0:"You cannot applaud a draft"),be=(0,k.wH)(i,I),Se=be.isObvious,Ce=be.isSubtleForDesktop,he=be.alwaysShowClapsLabel,Ee=be.hasClapsLabel,ye=be.buttonScale,ge=!!(Z&&Z>0),Ne=!!(J&&J>0),we=ce&&ce.slug?(0,T.JLP)(H,ce.slug,pe):(0,T.kIi)(H,pe);return r.createElement(u.l,{isSubtleForDesktop:Ce,verticalClapsText:j},r.createElement(m.$,{isObvious:Se,buttonStyle:i,isSubtleForDesktop:Ce,disableReason:fe},M||fe?r.createElement(r.Fragment,null,le&&r.createElement(E.N8,null,r.createElement(c.q,{count:Z,clappedAt:ne,placement:Se?"FAR":"NEAR",onFloatEnd:te})),r.createElement(v.v,{isPopping:re,onPopEnd:se},r.createElement(s.d,{scale:ye,canUndo:ge,isCircle:Se,isFilled:ge,isUndoSuppressed:de.length>0,disableReason:fe,onClickAndHold:ae,onUndo:oe,shouldHideClapsText:D})),de.map((function(e){return r.createElement(d.P,{key:e,isLarge:Se,offset:e,onBurstEnd:ie})}))):r.createElement(y.R9,{operation:"register",post:t,user:t.creator,actionUrl:we,susiEntry:R},r.createElement(s.d,{isCircle:Se,scale:ye}))),Ne&&!V&&(!le||he)&&r.createElement(p.W,{buttonStyle:i,isSubtleForDesktop:Ce},r.createElement(S._,{shouldShowNetwork:Se,post:t,clapCount:J,showFullNumber:G,hasLabel:Ee,hasDialog:a,shouldShowResponsiveLabelText:Ce||I,shouldHideClapsText:D})))},D=(0,o.Ps)(I(),y.qU,y.Vm,S.U),x=function(e){var n;return r.createElement(N.cW,{source:{postId:null===(n=e.post)||void 0===n?void 0:n.id},extendSource:!0},r.createElement(O,e))}},36896:(e,n,t)=>{"use strict";t.d(n,{U:()=>a});var i=t(319),a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MultiVoteCount_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostVotersNetwork_post"}}]}}].concat(t.n(i)()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostVotersNetwork_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"voterCount"}},{kind:"Field",name:{kind:"Name",value:"recommenders"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]))}},28233:(e,n,t)=>{"use strict";t.d(n,{x:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsPinnedInContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}}]}}]}},33819:(e,n,t)=>{"use strict";t.d(n,{h:()=>f});var i=t(59713),a=t.n(i),o=t(67294),r=t(42933),l=t(33914),d=t(98024),s=t(95760),u=t(51512),c=t(6688),m=t(43915),p=t(55459);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=function(e){var n=e.allowResponses,t=e.responsesCount,i=e.handleClick,a=e.trackingData,v=e.isLimitedState,f=e.iconStylesOverride,b=e.countStylesOverride,S=e.svgSize,C=void 0===S?"L":S,h=e.responsesCountColor,E=void 0===h?"LIGHTER":h,y=e.disabledTooltipText,g=void 0===y?"":y,N=(0,c.I)(),w=(0,s.Av)(),P=(0,u.pK)();if(!n)return null;var F=function(e){return{fill:e.baseColor.fill.light,opacity:v?.4:1,cursor:v?"not-allowed":"pointer",":hover":{fill:v?void 0:e.baseColor.fill.lighter}}},T={opacity:v?.4:1},I="S"===C?o.createElement(m.Z,{"aria-label":"responses",className:N([F,f])}):o.createElement(p.Z,{"aria-label":"responses",className:N([F,f])}),O=o.createElement("button",{onClick:v?void 0:function(e){i(e),w.event("responses.viewAllClicked",k(k({},a),{},{source:P}))},className:N({cursor:"pointer",border:0,padding:0})},o.createElement(r.x,{display:"flex",flexDirection:"row",alignItems:"center"},o.createElement(r.x,{display:"flex",alignItems:"center"},I,!!t&&o.createElement(d.F,{tag:"p",scale:"M",color:E},o.createElement("span",{className:N([b,T])},t))))),D=o.createElement(l._,{tooltipText:g||"This feature is temporarily disabled.",targetDistance:15},O);return o.createElement(o.Fragment,null,v?D:O)}},29577:(e,n,t)=>{"use strict";t.d(n,{L:()=>r});var i=t(68356),a=t.n(i),o=t(19725),r=a()({loader:function(){return Promise.all([t.e(8342),t.e(3930),t.e(5402),t.e(9590),t.e(3913),t.e(7417)]).then(t.bind(t,55358))},modules:["src/components/responses/post/ThreadedResponsesSidebar"],webpack:function(){return[55358]},loading:function(){return null},render:(0,o.n)("ThreadedResponsesSidebar")})},73788:(e,n,t)=>{"use strict";t.d(n,{k:()=>u});var i=t(63038),a=t.n(i),o=t(67294),r=t(49486),l=t(29577),d=t(70586),s=t(92214),u=function(e){var n=e.children,t=e.post,i=e.preload,u=void 0===i||i,c=o.useState(void 0),m=a()(c,2),p=m[0],v=m[1],k=o.useCallback((function(e){return function(n){v(n),e()}}),[]);return o.createElement(d.E,{preload:u},(function(e){var i=e.showPreviousSidebar,a=e.hasLoaded,d=e.initialSidebarRender,u=e.isVisible,c=e.continueThisThreadPosts,m=e.openSidebar,f=e.cleanupSidebar;return o.createElement(r.Q.Provider,{value:{openSidebarToRespondToHighlight:k(m)}},!!t&&a&&o.createElement(l.L,{isResponsesSidebarVisible:u&&0===c.length,parentPost:t,inResponseToQuote:p,setInResponseToQuote:v,showPreviousSidebar:i,cleanupSidebar:f,initialSidebarRender:!!d.current}),!!t&&a&&c.map((function(e,n,a){var r=(0,s.iI)(n);return o.createElement(l.L,{key:t.id,isResponsesSidebarVisible:u&&n===a.length-1,parentPost:t,inResponseToQuote:p,setInResponseToQuote:v,continueThisThreadPost:e,continueThisThreadPostDepth:r,showPreviousSidebar:i,cleanupSidebar:f,initialSidebarRender:!!d.current})})),n)}))}},72393:(e,n,t)=>{"use strict";t.d(n,{f:()=>i});var i=t(67294).createContext({addContinueThisThreadSidebar:function(){return null},openSidebar:function(){return null},closeSidebar:function(){return null}})},70586:(e,n,t)=>{"use strict";t.d(n,{E:()=>k});var i=t(319),a=t.n(i),o=t(63038),r=t.n(o),l=t(38125),d=t.n(l),s=t(67294),u=t(29577),c=t(72393),m=t(77180),p=t(27108),v=t(8403),k=function(e){var n=e.preload,t=e.children,i=s.useState(!1),o=r()(i,2),l=o[0],k=o[1],f=(0,m.F)(),b=!!(0,v.Wd)("responsesOpen"),S=s.useState(!1),C=r()(S,2),h=C[0],E=C[1],y=s.useRef(!0),g=s.useRef(0),N=s.useState(!1),w=r()(N,2),P=w[0],F=w[1],T=s.useCallback((function(){return E(!0)}),[]),I=s.useState([]),O=r()(I,2),D=O[0],x=O[1],V=s.useCallback((function(e){y.current=!1,x([].concat(a()(D),[e]))}),[D]),R=s.useCallback((function(){x(d()(D))}),[D]),_=s.useCallback((function(){E(!1),x([]),y.current=!0}),[]);s.useEffect((function(){F(!0),E(b)}),[b]);var j=function(){window.innerWidth<f.breakpoints.md&&k(!0)};return s.useEffect((function(){return j(),p.V6.on("resize",j),function(){return p.V6.off("resize",j)}}),[]),s.useEffect((function(){var e,n,t=null===(e=window)||void 0===e||null===(n=e.document)||void 0===n?void 0:n.documentElement;return l&&null!=t&&t.style&&(h?(t.style.top="-".concat(g.current,"px"),g.current=t.scrollTop,t.style.overflow="hidden",t.style.position="fixed"):(t.style.overflow="",t.style.position="",t.style.top="",t.scrollTop=g.current)),function(){l&&null!=t&&t.style&&(t.style.overflow="",t.style.position="",t.style.top="",t.scrollTop=g.current)}}),[h]),s.useEffect((function(){n&&u.L.preload()}),[n]),s.createElement(c.f.Provider,{value:{addContinueThisThreadSidebar:V,openSidebar:T,closeSidebar:_}},t({showPreviousSidebar:R,hasLoaded:P,initialSidebarRender:y,isVisible:h,continueThisThreadPosts:D,openSidebar:T,cleanupSidebar:_}))}},66210:(e,n,t)=>{"use strict";t.d(n,{V:()=>k,k:()=>f});var i=t(28655),a=t.n(i),o=t(23493),r=t.n(o),l=t(71439),d=t(67294),s=t(95760),u=t(51512),c=t(27108),m=t(8403),p=t(21146);function v(){var e=a()(["\n  fragment PostScrollTracker_post on Post {\n    id\n    collection {\n      id\n    }\n    sequence {\n      sequenceId\n    }\n  }\n"]);return v=function(){return e},e}function k(e,n,t,i){var a=(0,s.Av)(),o=(0,u.pK)(),l=(0,m.he)(),v=(0,u.Qi)(),k=Date.now(),f=null,b=d.useCallback(r()((function(){if(e.current){var i=(0,p.L6)(e.current);if((0,p.pn)(i)){var r=Date.now(),d=(0,p.tM)(i),s=(0,p.UO)(),u=(0,p.t_)(),c=Math.round(d.top),m=Math.round(d.top+d.height),b=s.top,S=s.top+u.height,C=s.height,h={postIds:[n.id],collectionIds:[n.collection?n.collection.id:""],sequenceIds:[n.sequence?n.sequence.sequenceId:""],sources:t?["post_page"]:[v],tops:[c],bottoms:[m],areFullPosts:[!0],loggedAt:r,timeDiff:null!==f?Math.round(r-f):0,scrollTop:b,scrollBottom:S,scrollableHeight:C,viewStartedAt:k},E={referrer:l,referrerSource:o};t?a.event("post.streamScrolled",h,E):a.event("post.streamScrolled",h),f=r}}}),1e3),[n,t]);d.useEffect((function(){b();var e=null!=i&&i.current?(0,c.jC)(null==i?void 0:i.current):c.V6;return e.on("scroll_end",b),function(){e.off("scroll_end",b)}}),[b])}var f=(0,l.Ps)(v())},32261:(e,n,t)=>{"use strict";t.d(n,{O1:()=>o}),t(59713);var i=t(67294),a=i.createContext(null),o=function(e){var n=e.event,t=e.children;return i.createElement(a.Provider,{value:{event:n}},t)}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/2382.6222239d.chunk.js.map