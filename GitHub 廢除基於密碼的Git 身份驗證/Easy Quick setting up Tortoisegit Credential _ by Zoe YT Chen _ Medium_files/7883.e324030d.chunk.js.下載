(self.webpackChunklite=self.webpackChunklite||[]).push([[7883],{7883:(e,n,t)=>{"use strict";t.d(n,{Z:()=>ae,G:()=>ce});var o=t(28655),i=t.n(o),r=t(63038),l=t.n(r),a=t(71439),c=t(67294),s=t(12291),u=t(93653),d=t(46829);function m(){var e=i()(["\n  mutation DismissPostMutation($postId: ID!) {\n    dismissPost(postId: $postId)\n  }\n"]);return m=function(){return e},e}var p=(0,a.Ps)(m()),f=t(35848),E=t(10414),v=t(42963),h=t(53962),b=t(63564),g=t(1506),C=t(73882),y=t(71245),x=t(80362),S=t(42933),P=t(55099),w=t(98024),I=t(85277),F=function(e){var n=e.children,t=e.isVisible,o=e.post,i=e.hide,r=e.showLoadingIndicator,l=(0,y.h3)(o),a=(0,y.yb)(o),u=(0,s.I0)(),d=o.pendingCollection;return d?c.createElement(x.J,{ariaId:"manageSubmissionPopover",isVisible:t,hide:i,popoverRenderFn:function(){return c.createElement(S.x,{padding:"16px",maxWidth:"280px"},c.createElement(S.x,{display:"flex",flexDirection:"row",alignItems:"center"},c.createElement(S.x,{paddingRight:"8px"},c.createElement(C.v,{collection:d,size:40})),c.createElement(w.F,{scale:"S"},"This draft is submitted to ",d.name,".")),c.createElement(S.x,{flexDirection:"row",display:"flex",paddingTop:"16px"},c.createElement(S.x,{paddingRight:"8px"},c.createElement(P.z,{buttonStyle:"OBVIOUS",onClick:function(){i(),r(),l(o.pendingCollection).then((function(){window.location.reload(!1)}))}},"Accept")),c.createElement(P.z,{buttonStyle:"SUBTLE",onClick:function(){a(o.pendingCollection).then((function(){u((0,I.Dx)({message:"Story removed from ".concat(d.name||"publication")}))})),i()}},"Don't accept")))}},n):n},D=t(74871),R=t(73891),k=t(32262),T=t(82318),_="removeFromPublicationPopover",A=function(e){var n=e.viewer,t=e.show,o=e.post,i=(0,R.gY)(o.pendingCollection||o.collection).viewerEdge,r=null==i?void 0:i.isEditor;return n&&("APPROVED"===o.statusForCollection&&(r||(0,D.py)(o,n)||(0,D.Hj)(o,n))||"PENDING"===o.statusForCollection&&(0,D.Hj)(o,n))?c.createElement(k.Sl,null,c.createElement(T.r,{ariaControls:_,ariaExpanded:"false",onClick:t},"Remove story from publication")):null},M=function(e){var n=e.children,t=e.isVisible,o=e.hide,i=e.post,r=e.viewer,l=(0,s.I0)(),a=(0,y.yb)(i),u=i.collection||i.pendingCollection;return u?c.createElement(x.J,{ariaId:_,isVisible:t,hide:o,popoverRenderFn:function(){return c.createElement(S.x,{padding:"16px",maxWidth:"280px"},c.createElement(S.x,{display:"flex",flexDirection:"row",alignItems:"center"},c.createElement(S.x,{paddingRight:"8px"},c.createElement(C.v,{collection:u,size:40})),"APPROVED"===i.statusForCollection?c.createElement(w.F,{scale:"S"},(0,D.Hj)(i,r)?"Your":"This"," story is published in"," ",u.name,"."):"PENDING"===i.statusForCollection?c.createElement(w.F,{scale:"S"},"Your story is being reviewed by ",u.name," editors."):c.createElement(w.F,{scale:"S"},"This draft is submitted to ",u.name)),c.createElement(S.x,{flexDirection:"row",display:"flex",paddingTop:"16px"},c.createElement(S.x,{paddingRight:"8px"},c.createElement(P.z,{buttonStyle:"SUBTLE",onClick:function(){a(u).then((function(){l((0,I.Dx)({message:"Story removed from ".concat(u.name||"publication")}))}),(function(){l((0,I.Dx)({message:"There was a problem removing the story from ".concat(u.name||"publication"),toastStyle:"ERROR"}))})),o()}},"PENDING"===i.statusForCollection?"Cancel submission":"Remove from ".concat(u.name||"")))))}},n):n},O=t(965),V=t(49925),L=t(78820),B=t(73232),U=t(53976),N=t(66893),H=t(76532),K=t(1932),Q=t(62181),z=t(57469),G=t(7157),j=t(29169),J=t(79296),W=t(92528),Y=t(14391),$=t(65347),q=t(67297),X=t(93394),Z=t(39171),ee=t(51064),ne=t(95614),te=t(55573),oe=t(27952);function ie(){var e=i()(["\n  fragment CreatorActionOverflowPopover_post on Post {\n    allowResponses\n    id\n    statusForCollection\n    isLocked\n    isPublished\n    clapCount\n    mediumUrl\n    pinnedAt\n    pinnedByCreatorAt\n    curationEligibleAt\n    mediumUrl\n    responseDistribution\n    visibility\n    ...useIsPinnedInContext_post\n    pendingCollection {\n      id\n      name\n      creator {\n        id\n      }\n      avatar {\n        id\n      }\n      domain\n      slug\n    }\n    creator {\n      id\n      ...MutePopoverOptions_creator\n      ...auroraHooks_publisher\n    }\n    collection {\n      id\n      name\n      creator {\n        id\n      }\n      avatar {\n        id\n      }\n      domain\n      slug\n      ...MutePopoverOptions_collection\n      ...auroraHooks_publisher\n    }\n    ...ClapMutation_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return ie=function(){return e},e}var re=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}};function le(){return c.createElement(J.h,null,(function(e){return c.createElement(X.Z,{className:e(re)})}))}var ae=function(e){var n,t,o=e.creator,i=e.post,r=e.collection,a=e.showLoadingIndicator,m=e.setIsAuthorOrPubMuted,E=e.setMutedAuthorId,C=e.setMutedPubId,y=e.onPostDismissed,P=e.isMutingFromHomeFeed,w=e.isDismissDisabled,D=e.hideUndoApplause,_=void 0!==D&&D,J=c.useState(!1),X=l()(J,2),ie=X[0],re=X[1],ae=c.useState(!1),ce=l()(ae,2),se=ce[0],ue=ce[1],de=c.useState(!1),me=l()(de,2),pe=me[0],fe=me[1],Ee=i.allowResponses,ve=i.id,he=i.pendingCollection,be=i.mediumUrl,ge=i.visibility,Ce=(0,R.gY)(r).viewerEdge,ye=(0,R.gY)(he).viewerEdge,xe=(0,K.T)(i).viewerEdge,Se=(0,q.b$)((function(e){return e.multiVote.clapsPerPost})),Pe=(0,s.I0)(),we=c.useCallback((function(e){return Pe((0,$.at)(e))}),[Pe]),Ie=(0,te.l)(Se,i,xe),Fe=Ie.clapCount,De=Ie.viewerClapCount,Re=(0,I.w)(),ke=(0,H.H)().value,Te=null==ke?void 0:ke.id,_e=(0,O.CP)(),Ae=function(e){return(0,d.useMutation)(p,{variables:{postId:e}})}(i.id),Me=l()(Ae,1)[0],Oe=(0,L.KQ)(i),Ve=l()(Oe,2),Le=Ve[0],Be=Ve[1],Ue=(0,V.UL)(i.collection),Ne=(0,V.UL)(i.creator),He=c.useCallback((function(e){var n;Re({extraParams:{collectionName:(null===(n=i.collection)||void 0===n?void 0:n.name)||"",becamePinned:!!e.data.setPinnedAt.pinnedAt},toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(n=i.collection)||void 0===n?void 0:n.name]),Ke=c.useCallback((function(e){Re({message:e.data.postSetPinnedByCreatorAt.pinnedByCreatorAt?"This story has been pinned to your profile's homepage":"This story has been unpinned from your profile's homepage"})}),[]),Qe=c.useCallback((function(){Be().then(He)}),[Be,He,null==i||null===(t=i.collection)||void 0===t?void 0:t.name]),ze=(0,L.In)(i),Ge=l()(ze,2),je=Ge[0],Je=Ge[1],We=c.useCallback((function(){Je().then(Ke)}),[Je,Ke]),Ye=(0,q.v9)((function(e){return e.config.authDomain})),$e=!(0,ne.T)(),qe=!!(0,U.VB)({name:"unhide_mobile_ctas",placeholder:!1}),Xe=c.useState(!1),Ze=l()(Xe,2),en=Ze[0],nn=Ze[1],tn=i.responseDistribution===Y.Et.DISTRIBUTED,on=(0,ee.O)(!1),rn=l()(on,3),ln=rn[0],an=rn[1],cn=rn[2],sn=(0,ee.O)(!1),un=l()(sn,4),dn=un[0],mn=un[2],pn=un[3],fn=(0,u.j)(i.id),En=l()(fn,1)[0],vn=(0,ee.O)(!1),hn=l()(vn,3),bn=hn[0],gn=hn[1],Cn=hn[2],yn=c.useCallback((function(){En().then((function(){return window.location.reload()}))}),[En]),xn="Delete story".concat(tn?" and response":""),Sn=tn?B.Q:"Are you sure you want to delete this story?",Pn=(0,N.P5)("can_edit_members_only_posts");if(!o||!ke)return null;var wn=Te===o.id,In=(null==Ce?void 0:Ce.isEditor)||(null==ye?void 0:ye.isEditor),Fn=wn||In,Dn=Pn&&i&&i.isLocked,Rn=Fn||Dn,kn="creatorActionOverflowMenu",Tn="LOCKED"===ge,_n=In&&!wn||!Fn;return en?c.createElement(v.l,{to:(0,oe.d0A)(Ye,i.id)}):c.createElement(c.Fragment,null,c.createElement(W.Q,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:ln,onConfirm:function(){nn(!0)},hide:cn,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},B.t),c.createElement(W.Q,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:bn,onConfirm:yn,hide:Cn,titleText:xn,confirmText:"Delete",isDestructiveAction:!0},Sn),c.createElement(x.J,{ariaId:kn,isVisible:dn,hide:mn,popoverRenderFn:function(){return c.createElement(k.mX,null,c.createElement(c.Fragment,null,($e||qe)&&Rn?c.createElement(k.Sl,null,tn?c.createElement(T.r,{linkStyle:"SUBTLE",onClick:(0,Z.B)(mn,an)},"Edit story"):c.createElement(T.r,{linkStyle:"SUBTLE",href:(0,oe.d0A)(Ye,i.id)},"Edit story")):null,r&&In&&Ue&&c.createElement(k.Sl,null,c.createElement(T.r,{onClick:Qe},Le?"Unpin this story from ":"Pin this story to ",r.name)),wn&&Ne&&c.createElement(k.Sl,null,c.createElement(T.r,{onClick:We},je?"Unpin this story from your profile":"Pin this story to your profile")),Te&&!w?c.createElement(k.Sl,null,c.createElement(T.r,{onClick:function(){Me({variables:{postId:i.id}}),y&&y(i.id),mn()}},"Dismiss this story")):null,Fn?c.createElement(c.Fragment,null,c.createElement(k.oK,null),c.createElement(k.Sl,null,c.createElement(T.r,{href:(0,oe.KIb)(Ye,i.id)},"Story settings"))):null,Fn&&c.createElement(k.Sl,null,c.createElement(T.r,{href:(0,oe.T0G)(Ye,i.id)},"Story stats")),Fn&&Tn&&be&&(null==xe?void 0:xe.shareKey)&&c.createElement(h.$,{post:i,shareKey:null==xe?void 0:xe.shareKey}),Fn&&c.createElement(k.oK,null),Fn?c.createElement(c.Fragment,null,c.createElement(b.r,{hidePopover:mn,postId:i.id,allowResponses:Ee}),c.createElement(g.yi,{post:i,show:function(){ue(!0),mn()}}),c.createElement(A,{viewer:ke,post:i,show:function(){fe(!0),mn()}}),wn&&c.createElement(k.Sl,null,c.createElement(T.r,{onClick:(0,Z.B)(mn,gn)},"Delete story"))):null,_n?c.createElement(c.Fragment,null,In&&c.createElement(k.oK,null),!_&&c.createElement(c.Fragment,null,ke.id&&Fe&&De&&De>0?c.createElement(k.Sl,null,c.createElement(T.r,{onClick:function(){_e(i,(null==ke?void 0:ke.id)||"",-De,xe),we({postId:ve,clapCount:Fe-De,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),mn()}},"Undo applause for this post")):null),c.createElement(c.Fragment,null,Te?c.createElement(j.z,{targetUserId:o.id,postId:i.id,hidePopover:mn,viewerId:Te}):c.createElement(k.Sl,null,c.createElement(Q.R9,{operation:"register",post:i,susiEntry:"report_footer"},"Report this story"))),c.createElement(f.q,{hidePopover:mn,creator:o,collection:r,postId:i.id,setIsAuthorOrPubMuted:m,setMutedAuthorId:E,setMutedPubId:C,isMutingFromHomeFeed:P}),c.createElement(z.F,{hidePopover:mn,creator:o,viewer:ke}),c.createElement(G.j,{hidePopover:mn,creator:o,viewer:ke})):null))}},c.createElement(g.jB,{post:i,isVisible:se,hide:function(){ue(!1)},showLoadingIndicator:a},c.createElement(M,{viewer:ke,post:i,isVisible:pe,hide:function(){fe(!1)}},c.createElement(F,{post:i,isVisible:ie,hide:function(){re(!1)},showLoadingIndicator:a},c.createElement(S.x,{flexGrow:"0",marginRight:"-4px"},c.createElement(T.r,{ariaControls:kn,ariaExpanded:dn?"true":"false",ariaLabel:"More options",onClick:pn},c.createElement(le,null))))))))},ce=(0,a.Ps)(ie(),E.m,E.G,O.JP,L.xt,V.C5)},1506:(e,n,t)=>{"use strict";t.d(n,{x7:()=>B,yi:()=>K,jB:()=>G});var o=t(63038),i=t.n(o),r=t(28655),l=t.n(r),a=t(71439),c=t(80439),s=t(67294),u=t(73882),d=t(27271),m=t(71245),p=t(74871),f=t(89423),E=t(32262),v=t(42933),h=t(82318),b=t(77284),g=t(55099),C=t(19464),y=t(80362),x=t(13397),S=t(98024),P=t(37278),w=t(87561),I=t(27108);function F(){var e=l()(["\n  fragment CollectionSubmission_post on Post {\n    id\n    ...CollectionSubmissionPopover_post\n    ...CollectionSubmissionPopoverMenuItem_post\n  }\n  ","\n  ","\n"]);return F=function(){return e},e}function D(){var e=l()(["\n  fragment CollectionSubmissionPopover_post on Post {\n    id\n    isPublished\n    creator {\n      id\n    }\n  }\n"]);return D=function(){return e},e}function R(){var e=l()(["\n  fragment CollectionSubmissionPopoverMenuItem_post on Post {\n    id\n    statusForCollection\n    isPublished\n    creator {\n      id\n    }\n  }\n"]);return R=function(){return e},e}function k(){var e=l()(["\n  query CollectionSubmissionPopoverQuery {\n    viewer {\n      id\n      writerCollections {\n        ...CollectionSubmissionPopoverQuery_collection\n      }\n      adminCollections {\n        ...CollectionSubmissionPopoverQuery_collection\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function T(){var e=l()(["\n  fragment CollectionSubmissionPopoverQuery_collection on Collection {\n    ...CollectionSubmissionOption_collection\n    ...ManageSubmission_collection\n  }\n  ","\n  ","\n"]);return T=function(){return e},e}function _(){var e=l()(["\n  fragment CollectionSubmissionOption_collection on Collection {\n    id\n    name\n    slug\n    ...CollectionAvatar_collection\n  }\n  ","\n"]);return _=function(){return e},e}var A=(0,a.Ps)(_(),d.d),M=(0,a.Ps)(T(),A,p.a6),O=(0,a.Ps)(k(),M),V=(0,a.Ps)(R()),L=(0,a.Ps)(D()),B=(0,a.Ps)(F(),L,V),U="collectionSubmissionPopover",N=[{name:"",value:"No publication",content:s.createElement(v.x,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},s.createElement(S.F,{scale:"M",color:"DARKER"},"No publication"))}];function H(e){var n=e.collection;return n.name?s.createElement(v.x,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},s.createElement(S.F,{scale:"M",color:"DARKER"},n.name),s.createElement(u.v,{collection:n,size:32})):null}function K(e){var n=e.show,t=e.post,o=t.statusForCollection,r=t.isPublished,l=s.useState(!1),a=i()(l,2),c=a[0],u=a[1];return c||I.V6.on("load",(function(){return u(!0)})),!o&&r&&c?s.createElement(z,{post:t,noQueryReturn:null},(function(e){var o=e.loading,i=e.error,r=e.data;if(o||i)return null;var l=(void 0===r?{viewer:void 0}:r).viewer,a=t.creator;if(!l||!a||l.id!==a.id)return null;var c=l.adminCollections,u=l.writerCollections;return 0===c.length&&0===u.length?null:s.createElement(E.Sl,null,s.createElement(h.r,{ariaControls:U,ariaExpanded:"false",onClick:n},"Add to publication"))})):null}function Q(e){var n=e.isVisible,t=e.hide;return s.createElement(b.V,{isVisible:n,hide:t,withCloseButton:!0},s.createElement(v.x,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},s.createElement(P.X6,{scale:"M",tag:"h3"},"Story submitted"),s.createElement(v.x,{paddingTop:"8px",paddingBottom:"24px"},s.createElement(w.QE,{scale:"M"},"Weâ€™ll email you when the publication editor has reviewed your submission.")),s.createElement(g.z,{buttonStyle:"OBVIOUS",onClick:t},"OK")))}var z=function(e){var n=e.children,t=e.post,o=e.noQueryReturn,i=t.creator;return i?s.createElement(f.I,null,(function(e){return e?e.id!==i.id?o:s.createElement(c.AE,{query:O,ssr:!1},(function(e){var t=e.loading,o=e.error,i=e.data;return n({loading:t,error:o,data:i})})):o})):o},G=function(e){var n=e.post,t=e.hide,o=e.showLoadingIndicator,r=e.isVisible,l=e.children,a=s.useState(!1),c=i()(a,2),u=c[0],d=c[1],p=s.useState(""),f=i()(p,2),E=f[0],b=f[1],P=(0,m.h3)(n),w=(0,m.Lf)(n);return u||I.V6.on("load",(function(){return d(!0)})),n.isPublished&&u?s.createElement(C.B,null,(function(e){var i=e.isVisible,a=e.hide,c=e.show;return s.createElement(s.Fragment,null,s.createElement(Q,{hide:a,isVisible:i}),s.createElement(z,{post:n,noQueryReturn:l},(function(e){var i=e.loading,a=e.error,u=e.data;if(i||a)return l;var d=(void 0===u?{viewer:void 0}:u).viewer,m=n.creator;if(!d||!m||d.id!==m.id)return l;var p=d.adminCollections,f=d.writerCollections;if(0===p.length&&0===f.length)return l;var C=p.concat(f).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:s.createElement(H,{collection:e})}})),I=N.concat(C),F=p.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),D=f.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),R="";if(E){var k=I.find((function(e){return e.name===E}));k&&(R=k.value)}var T="addStoryToPublicationTitle";return s.createElement(y.J,{ariaId:U,hide:t,isVisible:r,popoverRenderFn:function(){return s.createElement(v.x,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},s.createElement(S.F,{scale:"M",color:"DARKER",ariaLabelledById:T},"Add your story to a publication:"),s.createElement(v.x,{marginTop:"10px",position:"relative"},s.createElement(v.x,{position:"absolute",height:"16px",width:"100%",bottom:"0",zIndex:"100",backgroundImage:"linear-gradient(transparent, #ffffff)"}),s.createElement(v.x,{maxHeight:"160px",overflow:"auto"},s.createElement(x.E,{value:R,onChange:b,options:I,radioButtonsName:"addStory",ariaLabelledBy:T}))),s.createElement(v.x,{display:"flex",marginTop:"20px"},E in F?s.createElement(g.z,{onClick:function(){var e=F[E];t(),o(),P(e).then((function(){window.location.reload(!1)}))},buttonStyle:"OBVIOUS"},"Add story"):s.createElement(g.z,{onClick:function(){var e=D[E];w(e),t(),c()},disabled:!E},"Submit"),s.createElement(v.x,{marginLeft:"10px"},s.createElement(S.F,{scale:"M",color:"LIGHTER"},s.createElement(h.r,{onClick:t},s.createElement(v.x,{padding:"10px"},"Cancel"))))),s.createElement(v.x,{marginTop:"10px"},s.createElement(S.F,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},l)})))})):l}},74871:(e,n,t)=>{"use strict";t.d(n,{Hj:()=>s,py:()=>u,a6:()=>d,En:()=>m});var o=t(28655),i=t.n(o),r=t(71439),l=t(27271);function a(){var e=i()(["\n  fragment ManageSubmission_post on Post {\n    id\n    statusForCollection\n    collection {\n      ...ManageSubmission_collection\n    }\n    pendingCollection {\n      ...ManageSubmission_collection\n    }\n    creator {\n      id\n    }\n  }\n  ","\n"]);return a=function(){return e},e}function c(){var e=i()(["\n  fragment ManageSubmission_collection on Collection {\n    name\n    creator {\n      id\n    }\n    ...CollectionAvatar_collection\n  }\n  ","\n"]);return c=function(){return e},e}var s=function(e,n){return n&&e.creator&&n.id===e.creator.id},u=function(e,n){var t=e.pendingCollection||e.collection;return t&&t.creator&&n.id===t.creator.id},d=(0,r.Ps)(c(),l.d),m=(0,r.Ps)(a(),d)}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/7883.e324030d.chunk.js.map